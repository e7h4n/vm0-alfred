name: Run Alfred

on:
  workflow_dispatch:
    inputs:
      recording_id:
        description: 'Recording ID from voice input'
        required: true
      auth_token:
        description: 'Authentication token'
        required: true

jobs:
  run-alfred:
    runs-on: ubuntu-latest
    steps:
      - name: Run Alfred Agent
        uses: vm0-ai/run-action@v1
        with:
          agent: alfred
          recording_id: ${{ github.event.inputs.recording_id }}
          auth_token: ${{ github.event.inputs.auth_token }}
          artifact-name: alfred-output
          vm0-token: ${{ secrets.VM0_TOKEN }}
          secrets: |
            CLAUDE_CODE_OAUTH_TOKEN=${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
